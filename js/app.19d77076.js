(function(e){function t(t){for(var a,i,r=t[0],c=t[1],u=t[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},3730:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_gameContract","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_player1","type":"address"},{"indexed":false,"internalType":"address","name":"_player2","type":"address"},{"indexed":false,"internalType":"address","name":"_gameContract","type":"address"}],"name":"MatchFound","type":"event"},{"inputs":[],"name":"destroy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"games","outputs":[{"internalType":"contract Game","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getGames","outputs":[{"internalType":"contract Game[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"playerQueue","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"requestGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),o={class:"info"},s={class:"info"},i=Object(a["e"])("h1",null,"ROCK PAPER SCISSORS",-1),r=Object(a["e"])("h4",null,"on Ethereum",-1),c={class:"app"};function u(e,t,n,u,l,d){var p=Object(a["i"])("start"),y=Object(a["i"])("commit"),b=Object(a["i"])("reveal"),m=Object(a["i"])("end"),f=Object(a["i"])("wait");return Object(a["f"])(),Object(a["c"])(a["a"],null,[Object(a["e"])("div",o,"Selected address: "+Object(a["j"])(l.selectedAddress),1),Object(a["e"])("div",s,"Playing with: "+Object(a["j"])(l.playerAddress),1),i,r,Object(a["e"])("div",c,[l.showStart?(Object(a["f"])(),Object(a["c"])(p,{key:0,onStart:d.start},null,8,["onStart"])):Object(a["d"])("",!0),l.showCommit?(Object(a["f"])(),Object(a["c"])(y,{key:1,onCommitChoice:d.commit},null,8,["onCommitChoice"])):Object(a["d"])("",!0),l.showReveal?(Object(a["f"])(),Object(a["c"])(b,{key:2,onRevealChoice:d.reveal},null,8,["onRevealChoice"])):Object(a["d"])("",!0),l.showEnd?(Object(a["f"])(),Object(a["c"])(m,{key:3,result:l.result,canPayout:l.canPayout,onPayoutGame:d.payout},null,8,["result","canPayout","onPayoutGame"])):Object(a["d"])("",!0),l.showWait?(Object(a["f"])(),Object(a["c"])(f,{key:4,message:l.status,showLoadingAnimation:l.statusLoading,anotherMessage:l.anotherStatus},null,8,["message","showLoadingAnimation","anotherMessage"])):Object(a["d"])("",!0)])],64)}var l=n("1da1"),d=(n("96cf"),Object(a["n"])("data-v-06a6c0b8"));Object(a["h"])("data-v-06a6c0b8");var p={key:0,class:"lds-ripple"},y=Object(a["e"])("div",null,null,-1),b=Object(a["e"])("div",null,null,-1),m={class:"msg"},f=Object(a["e"])("br",null,null,-1),h={class:"msg"};Object(a["g"])();var v=d((function(e,t,n,o,s,i){return Object(a["f"])(),Object(a["c"])(a["a"],null,[n.showLoadingAnimation?(Object(a["f"])(),Object(a["c"])("div",p,[y,b])):Object(a["d"])("",!0),Object(a["e"])("div",m,Object(a["j"])(n.anotherMessage),1),f,Object(a["e"])("div",h,Object(a["j"])(n.message),1)],64)})),O={name:"Wait",props:{message:String,anotherMessage:String,showLoadingAnimation:Boolean},data:function(){return{}}};n("cfba");O.render=v,O.__scopeId="data-v-06a6c0b8";var j=O,g=Object(a["n"])("data-v-a0637648");Object(a["h"])("data-v-a0637648");var w=Object(a["e"])("div",{class:"text"},[Object(a["e"])("p",null,"We've found MetaMask in your Browser! ")],-1),C=Object(a["e"])("div",null,[Object(a["e"])("p",null,"Just connect an Account and you are ready to play.")],-1);Object(a["g"])();var k=g((function(e,t,n,o,s,i){return Object(a["f"])(),Object(a["c"])(a["a"],null,[Object(a["e"])("div",null,[Object(a["e"])("button",{onClick:t[1]||(t[1]=function(){return i.start&&i.start.apply(i,arguments)})},"Let's Play!")]),w,C],64)})),M={name:"Start",emits:["start"],data:function(){return{}},methods:{start:function(){this.$emit("start")}}};n("fa16");M.render=k,M.__scopeId="data-v-a0637648";var A=M,S=n("f206"),P=n.n(S),T=n("abdf"),L=n.n(T),_=n("fbb3"),x=n.n(_),W=Object(a["n"])("data-v-37a30182");Object(a["h"])("data-v-37a30182");var R=Object(a["e"])("div",null,[Object(a["e"])("p",null,"Make your choice!")],-1),G={id:"choices",class:"part"},E=Object(a["e"])("img",{src:P.a},null,-1),I=Object(a["e"])("img",{src:L.a},null,-1),B=Object(a["e"])("img",{src:x.a},null,-1),N={class:"part"};Object(a["g"])();var Y=W((function(e,t,n,o,s,i){return Object(a["f"])(),Object(a["c"])(a["a"],null,[R,Object(a["e"])("div",G,[Object(a["e"])("table",null,[Object(a["e"])("tr",null,[Object(a["e"])("td",null,[Object(a["e"])("label",null,[Object(a["m"])(Object(a["e"])("input",{type:"radio",id:"rock",value:"rock","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.choice=e})},null,512),[[a["k"],s.choice]]),E])]),Object(a["e"])("td",null,[Object(a["e"])("label",null,[Object(a["m"])(Object(a["e"])("input",{type:"radio",id:"paper",value:"paper","onUpdate:modelValue":t[2]||(t[2]=function(e){return s.choice=e})},null,512),[[a["k"],s.choice]]),I])]),Object(a["e"])("td",null,[Object(a["e"])("label",null,[Object(a["m"])(Object(a["e"])("input",{type:"radio",id:"scissors",value:"scissors","onUpdate:modelValue":t[3]||(t[3]=function(e){return s.choice=e})},null,512),[[a["k"],s.choice]]),B])])])])]),Object(a["e"])("div",N,[Object(a["m"])(Object(a["e"])("input",{type:"text",placeholder:"Your password",id:"secret","onUpdate:modelValue":t[4]||(t[4]=function(e){return s.secret=e})},null,512),[[a["l"],s.secret]]),Object(a["e"])("button",{onClick:t[5]||(t[5]=function(){return i.commit&&i.commit.apply(i,arguments)})},"Commit (0.01 ether)")])],64)})),q={name:"Commit",emits:["commitChoice"],data:function(){return{choice:"",secret:""}},methods:{commit:function(){""!=this.choice&&""!=this.secret?this.$emit("commitChoice",this.choice,this.secret):console.log("Nothing selected.")}}};n("ab22");q.render=Y,q.__scopeId="data-v-37a30182";var J=q,U=Object(a["n"])("data-v-086e7a90"),D=U((function(e,t,n,o,s,i){return Object(a["f"])(),Object(a["c"])("div",null,[Object(a["e"])("button",{onClick:t[1]||(t[1]=function(e){return i.reveal()})},"Reveal")])})),F={name:"Reveal",emits:["revealChoice"],data:function(){return{}},methods:{reveal:function(){this.$emit("revealChoice")}}};F.render=D,F.__scopeId="data-v-086e7a90";var V=F,$=Object(a["n"])("data-v-e9f93e20"),K=$((function(e,t,n,o,s,i){return Object(a["f"])(),Object(a["c"])(a["a"],null,[Object(a["e"])("h2",null,Object(a["j"])(n.result),1),Object(a["e"])("div",null,[n.canPayout?(Object(a["f"])(),Object(a["c"])("button",{key:0,onClick:t[1]||(t[1]=function(e){return i.payout()})},"Pay me off!")):Object(a["d"])("",!0)])],64)})),Q={name:"End",emits:["payoutGame"],props:{result:String,canPayout:Boolean},data:function(){return{}},methods:{payout:function(){this.$emit("payoutGame")}}};Q.render=K,Q.__scopeId="data-v-e9f93e20";var z,H,X,Z=Q,ee=n("c030"),te="0x751AC173155bba453710cC8D97D5D3fAC9c0F25F",ne=n("f43e"),ae=n("3730"),oe={name:"App",components:{Start:A,Wait:j,Commit:J,Reveal:V,End:Z},data:function(){return{showStart:!0,showWait:!1,showCommit:!1,showReveal:!1,showEnd:!1,selectedAddress:"",playerAddress:"n.a.",player1Address:"",player2Address:"",status:"",anotherStatus:"",statusLoading:!0,result:"",canPayout:!1,choice:"",secret:""}},beforeMount:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("undefined"===typeof window.ethereum||!window.ethereum.isMetaMask){t.next=11;break}return t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:n=t.sent,e.selectedAddress=n[0],console.log(e.selectedAddress),a=new ee["a"].providers.Web3Provider(window.ethereum),z=a.getSigner(),H=new ee["a"].Contract(te,ae,z),t.next=12;break;case 11:alert("This App requires MetaMask. (https://metamask.io/)");case 12:window.ethereum.on("accountsChanged",(function(t){console.log("account changed to "+t[0]),e.selectedAddress=t[0]})),H.on("MatchFound",(function(t,n,a){console.log("Your game contract is at: "+a),e.player1Address=t,e.player2Address=n,X=new ee["a"].Contract(a,ne,z),e.showWait=!1,e.showCommit=!0,X.on("CommitPhaseOver",(function(){console.log(e),e.showWait=!1,e.showReveal=!0})),X.on("RevealPhaseOver",(function(){console.log(e),e.status="picking Winner...",X.pickWinner()})),X.on("WinnerIs",(function(t){switch(console.log(e),e.showWait=!1,e.result=t,t){case 1:e.result="Draw!",e.canPayout=!0;break;case 2:console.log(e.playerAddress.toLowerCase()),console.log(e.player1Address.toLowerCase()),e.playerAddress.toLowerCase()==e.player1Address.toLowerCase()?(e.result="You win!",e.canPayout=!0):e.result="You lose!";break;case 3:console.log(e.playerAddress.toLowerCase()),console.log(e.player2Address.toLowerCase()),e.playerAddress.toLowerCase()==e.player2Address.toLowerCase()?(e.result="You win!",e.canPayout=!0):e.result="You lose!";break;default:e.result="Couldn't retrieve the game result :(",console.log("Couldn't retrieve the game result."),console.log("Address of your game contract: "+a)}e.showEnd=!0})),X.on("GameOver",(function(){console.log(e),e.showEnd=!1,e.showStart=!0}))}));case 14:case"end":return t.stop()}}),t)})))()},methods:{start:function(){if(console.log("using address: "+this.selectedAddress),null==this.selectedAddress)throw new Error("failed to get MetaMask address");this.playerAddress=this.selectedAddress;var e=H.requestGame(),t=this;e.then((function(e){console.log(e),t.anotherStatus="",t.status="waiting for confirmation...",t.statusLoading=!0,t.showStart=!1,t.showWait=!0;var n=e.wait(1);n.then((function(e){t.statusLoading=!1,t.anotherStatus="Confirmed in Block #"+e.blockNumber,t.status="Lets wait for a worthy opponent!"}))}))},commit:function(e,t){this.choice=e,this.secret=t;var n={gasPrice:6e9,gasLimit:8e4,value:ee["a"].utils.parseUnits("0.01","ether")},a=ee["a"].utils.solidityKeccak256(["string","string"],[e,t]);console.log("secret choice: "+a);var o=X.commit(a,n),s=this;o.then((function(e){console.log(e),s.showCommit=!1,s.anotherStatus="",s.status="waiting for confirmation...",s.statusLoading=!0,s.showWait=!0;var t=e.wait(1);t.then((function(e){s.statusLoading=!1,s.anotherStatus="Confirmed in Block #"+e.blockNumber,s.status="waiting for your opponent..."}))}))},reveal:function(){console.log(this.choice),console.log(this.secret);var e=X.reveal(this.choice,this.secret),t=this;e.then((function(e){console.log(e),t.showReveal=!1,t.anotherStatus="",t.status="waiting for confirmation...",t.statusLoading=!0,t.showWait=!0;var n=e.wait(1);n.then((function(e){t.statusLoading=!1,t.anotherStatus="Confirmed in Block #"+e.blockNumber,t.status="waiting for your opponent..."}))}))},pickWinner:function(){var e=this,t=X.pickWinner();t.then((function(t){console.log(t),e.anotherStatus="",e.status="waiting for confirmation...",e.statusLoading=!0,e.showWait=!0;var n=t.wait(1);n.then((function(t){e.statusLoading=!1,e.anotherStatus="Confirmed in Block #"+t.blockNumber,e.status="waiting for smart contract..."}))}))},payout:function(){var e=X.payout();e.then((function(e){console.log(e)}))}}};n("f8ac");oe.render=u;var se=oe;Object(a["b"])(se).mount("#app")},"9af6":function(e,t,n){},ab22:function(e,t,n){"use strict";n("f0d1")},abdf:function(e,t,n){e.exports=n.p+"img/paper-svgrepo-com.7939a248.svg"},cfba:function(e,t,n){"use strict";n("9af6")},d7dd:function(e,t,n){},d811:function(e,t,n){},f0d1:function(e,t,n){},f206:function(e,t,n){e.exports=n.p+"img/rock.2a68def3.svg"},f43e:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[],"name":"CommitPhaseOver","type":"event"},{"anonymous":false,"inputs":[],"name":"GameOver","type":"event"},{"anonymous":false,"inputs":[],"name":"RevealPhaseOver","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum Game.Results","name":"_result","type":"uint8"}],"name":"WinnerIs","type":"event"},{"inputs":[],"name":"bet","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"secretChoice","type":"bytes32"}],"name":"commit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"firstRevealedPlayer","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address payable","name":"_player1","type":"address"},{"internalType":"address payable","name":"_player2","type":"address"},{"internalType":"uint256","name":"_bet","type":"uint256"}],"name":"init","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"payout","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"pickWinner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"player1","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"player1Choice","outputs":[{"internalType":"enum Game.Choices","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"player2","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"player2Choice","outputs":[{"internalType":"enum Game.Choices","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"choice","type":"string"},{"internalType":"string","name":"secret","type":"string"}],"name":"reveal","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},f8ac:function(e,t,n){"use strict";n("d7dd")},fa16:function(e,t,n){"use strict";n("d811")},fbb3:function(e,t,n){e.exports=n.p+"img/scissors.19868568.svg"}});
//# sourceMappingURL=app.19d77076.js.map